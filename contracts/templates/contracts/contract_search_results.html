{% if contracts %}
<div class="search-results">
    <table class="table table-bordered table-striped">
        <thead>
            <tr>
                <th>Contract ID</th>
                <th>Event Date</th>
                <th>Primary Contact</th>
                <th>Photographer</th>
                <th>Videographer</th>
                <th>Photobooth</th>
                <th>DJ</th>
                <th>Sales Person</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
        {% for contract in contracts %}
        <tr onclick="window.location='{% url 'contracts:contract_detail' id=contract.pk %}';" style="cursor: pointer;">
            <td>{{ contract.custom_contract_number }}</td>
            <td>{{ contract.event_date|date:"Y-m-d" }}</td>
            <td>{{ contract.client.primary_contact }}</td>
            <td>
                {% if contract.photography_package %}
                    {% if contract.photographer1 %}
                        {{ contract.photographer1.get_full_name }}
                    {% else %}
                        <span style="color: red;">Not Assigned</span>
                    {% endif %}
                    {% if contract.photography_additional %}
                        <br>
                        {% if contract.photographer2 %}
                            {{ contract.photographer2.get_full_name }}
                        {% else %}
                            <span style="color: red;">Not Assigned</span>
                        {% endif %}
                    {% endif %}
                {% else %}
                    N/A
                {% endif %}
            </td>
            <td>
                {% if contract.videography_package %}
                    {% if contract.videographer1 %}
                        {{ contract.videographer1.get_full_name }}
                    {% else %}
                        <span style="color: red;">Not Assigned</span>
                    {% endif %}
                    {% if contract.videography_additional %}
                        <br>
                        {% if contract.videographer2 %}
                            {{ contract.videographer2.get_full_name }}
                        {% else %}
                            <span style="color: red;">Not Assigned</span>
                        {% endif %}
                    {% endif %}
                {% else %}
                    N/A
                {% endif %}
            </td>
            <td>
                {% if contract.photobooth_package %}
                    {% if contract.photobooth_op1 %}
                        {{ contract.photobooth_op1.get_full_name }}
                    {% else %}
                        <span style="color: red;">Not Assigned</span>
                    {% endif %}
                    {% if contract.photobooth_additional %}
                        <br>
                        {% if contract.photobooth_op2 %}
                            {{ contract.photobooth_op2.get_full_name }}
                        {% else %}
                            <span style="color: red;">Not Assigned</span>
                        {% endif %}
                    {% endif %}
                {% else %}
                    N/A
                {% endif %}
            </td>
            <td>
                {% if contract.dj_package %}
                    {% if contract.dj1 %}
                        {{ contract.dj1.get_full_name }}
                    {% endif %}
                    {% if contract.dj2 %}
                        <br>{{ contract.dj2.get_full_name }}
                    {% endif %}
                    {% if not contract.dj1 and not contract.dj2 %}
                        <span style="color: red;">Not Assigned</span>
                    {% endif %}
                {% else %}
                    N/A
                {% endif %}
            </td>
            <td>{{ contract.csr.get_full_name }}</td>
            <td>{{ contract.status }}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
</div>

<!-- Pagination Block -->
<div class="pagination-container" style="text-align: center; margin-top: 20px;">
    <div class="pagination">
        <span class="step-links">
            {% if contracts.has_previous %}
                <a href="?page=1{% for key, value in request.GET.items %}{% if key != 'page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}">&laquo; First</a>
                <a href="?page={{ contracts.previous_page_number }}{% for key, value in request.GET.items %}{% if key != 'page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}">Previous</a>
            {% endif %}

            <span class="current">
                Page {{ contracts.number }} of {{ contracts.paginator.num_pages }}
            </span>

            {% if contracts.has_next %}
                <a href="?page={{ contracts.next_page_number }}{% for key, value in request.GET.items %}{% if key != 'page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}">Next</a>
                <a href="?page={{ contracts.paginator.num_pages }}{% for key, value in request.GET.items %}{% if key != 'page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}">Last &raquo;</a>
            {% endif %}
        </span>
    </div>
</div>


{% else %}
<p>No contracts found.</p>
{% endif %}
