{% extends "base.html" %}
{% block title %}Booking Search{% endblock %}

{% block content %}
<div class="outer-container">
    {% include "bookings/partials/booking_search_form.html" with action_url=request.path %}
</div>

<div class="outer-container">
    {% include "bookings/partials/booking_search_results.html" %}
</div>
<div class="pagination">
    <span class="step-links">
        {% if bookings.has_previous %}
            <a href="?page=1{% for key, value in request.GET.items %}{% if key != 'page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}">&laquo; First</a>
            <a href="?page={{ bookings.previous_page_number }}{% for key, value in request.GET.items %}{% if key != 'page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}">Previous</a>
        {% endif %}

        <span class="current">
            Page {{ bookings.number }} of {{ bookings.paginator.num_pages }}
        </span>

        {% if bookings.has_next %}
            <a href="?page={{ bookings.next_page_number }}{% for key, value in request.GET.items %}{% if key != 'page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}">Next</a>
            <a href="?page={{ bookings.paginator.num_pages }}{% for key, value in request.GET.items %}{% if key != 'page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}">Last &raquo;</a>
        {% endif %}
    </span>
</div>

{% endblock %}

{% block extra_head %}
<script>
    function clearForm(form) {
        // Clear all fields in the form
        for (let element of form.elements) {
            if (element.type === "select-one" || element.type === "text" || element.type === "date") {
                element.value = ""; // Reset the value
            } else if (element.type === "checkbox" || element.type === "radio") {
                element.checked = false; // Uncheck checkboxes and radio buttons
            }
        }

        // Redirect to the base URL without query parameters
        const baseUrl = "{{ request.path }}"; // Use the base URL of the current page
        window.location.href = baseUrl;
    }
</script>
{% endblock %}
